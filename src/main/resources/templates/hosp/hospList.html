<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Information</title>
</head>
<body>
<h1>Hospital Information</h1>
<div id="hospitalList"></div>

<script>
    // 병원 정보를 가져와서 화면에 표시하는 함수
    function fetchHospitalInfo() {
        // AJAX를 이용하여 서버로부터 병원 정보를 가져옴
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "/hosp/hospList", true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                // 응답 데이터를 JSON 형식으로 파싱
                var hospitalList = JSON.parse(xhr.responseText);
                // 화면에 병원 정보를 표시
                displayHospitalInfo(hospitalList);
            }
        };
        xhr.send();
    }

    // 병원 정보를 화면에 표시하는 함수
    function displayHospitalInfo(hospitalList) {
        var hospitalListDiv = document.getElementById("hospitalList");
        hospitalListDiv.innerHTML = ""; // 이전에 표시된 내용 초기화
        if (hospitalList.length === 0) {
            hospitalListDiv.innerHTML = "<p>No hospital information available</p>";
        } else {
            var table = "<table border='1'><tr><th>Bizplc Name</th><th>Business State</th><th>Sickbed Count</th><th>Treatment Subject</th><th>Address</th></tr>";
            hospitalList.forEach(function (hospital) {
                table += "<tr>";
                table += "<td>" + hospital.bizplcNm + "</td>";
                table += "<td>" + hospital.bsnStateNm + "</td>";
                table += "<td>" + hospital.sickbdCnt + "</td>";
                table += "<td>" + hospital.treatSbjectCont + "</td>";
                table += "<td>" + hospital.refineLotnoAddr + "</td>";
                table += "</tr>";
            });
            table += "</table>";
            hospitalListDiv.innerHTML = table;
        }
    }

    // 페이지 로드 시 병원 정보 가져오기
    window.onload = function () {
        fetchHospitalInfo();
    };
</script>
</body>
</html>
